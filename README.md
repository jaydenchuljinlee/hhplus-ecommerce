# ðŸ›’ [hhplus] e-commerce ì„œë¹„ìŠ¤

---
## ðŸ’¡ í”„ë¡œì íŠ¸ ê°œìš”
- ìƒí’ˆ ì£¼ë¬¸ì— í•„ìš”í•œ ë©”ë‰´ ì •ë³´ë“¤ì„ êµ¬ì„±í•˜ê³  ì¡°íšŒê°€ ê°€ëŠ¥í•´ì•¼ í•©ë‹ˆë‹¤.
- ì‚¬ìš©ìžëŠ” ìƒí’ˆì„ ì—¬ëŸ¬ê°œ ì„ íƒí•´ ì£¼ë¬¸í•  ìˆ˜ ìžˆê³ , ë¯¸ë¦¬ ì¶©ì „í•œ ìž”ì•¡ì„ ì´ìš©í•©ë‹ˆë‹¤.
- ìƒí’ˆ ì£¼ë¬¸ ë‚´ì—­ì„ í†µí•´ íŒë§¤ëŸ‰ì´ ê°€ìž¥ ë†’ì€ ìƒí’ˆì„ ì¶”ì²œí•©ë‹ˆë‹¤.

## ðŸ”§ API ìš”êµ¬ì‚¬í•­
1ï¸âƒ£Â **`ì£¼ìš”`** **ìž”ì•¡ ì¶©ì „ / ì¡°íšŒ API**
- ê²°ì œì— ì‚¬ìš©ë  ê¸ˆì•¡ì„ ì¶©ì „í•˜ëŠ” API ë¥¼ ìž‘ì„±
- ì‚¬ìš©ìž ì‹ë³„ìž ë° ì¶©ì „í•  ê¸ˆì•¡ì„ ë°›ì•„ ìž”ì•¡ì„ ì¶©ì „
- ì‚¬ìš©ìž ì‹ë³„ìžë¥¼ í†µí•´ í•´ë‹¹ ì‚¬ìš©ìžì˜ ìž”ì•¡ì„ ì¡°íšŒ

2ï¸âƒ£Â **`ê¸°ë³¸` ìƒí’ˆ ì¡°íšŒ API**
- ìƒí’ˆ ì •ë³´ ( ID, ì´ë¦„, ê°€ê²©, ìž”ì—¬ìˆ˜ëŸ‰ ) ì„ ì¡°íšŒí•˜ëŠ” API ë¥¼ ìž‘ì„±
- ì¡°íšŒì‹œì ì˜ ìƒí’ˆë³„ ìž”ì—¬ìˆ˜ëŸ‰ì„ ì²´í¬í•˜ì—¬ ì •í•©ì„±ì„ í™•ë³´í•  ê²ƒ

3ï¸âƒ£Â **`ì£¼ìš”`** **ì£¼ë¬¸ / ê²°ì œ API**
- ì‚¬ìš©ìž ì‹ë³„ìžì™€ (ìƒí’ˆ ID, ìˆ˜ëŸ‰) ëª©ë¡ì„ ìž…ë ¥ë°›ì•„ ì£¼ë¬¸í•˜ê³  ê²°ì œë¥¼ ìˆ˜í–‰í•˜ëŠ” API êµ¬í˜„
- ê²°ì œëŠ” ê¸° ì¶©ì „ëœ ìž”ì•¡ì„ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•˜ë©° ì„±ê³µí•  ì‹œ ìž”ì•¡ì„ ì°¨ê°í•´ì•¼ í•œë‹¤.
- ë°ì´í„° ë¶„ì„ì„ ìœ„í•´ ê²°ì œ ì„±ê³µ ì‹œì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì£¼ë¬¸ ì •ë³´ë¥¼ ë°ì´í„° í”Œëž«í¼ì— ì „ì†¡í•´ì•¼ í•œë‹¤.
  ( ë°ì´í„° í”Œëž«í¼ì´ ì–´í”Œë¦¬ì¼€ì´ì…˜ `ì™¸ë¶€` ë¼ëŠ” ê°€ì •ë§Œ ì§€ì¼œ ìž‘ì—…í•  ê²ƒ )

4ï¸âƒ£Â **`ê¸°ë³¸` ìƒìœ„ ìƒí’ˆ ì¡°íšŒ API**
- ìµœê·¼ 3ì¼ê°„ ê°€ìž¥ ë§Žì´ íŒ”ë¦° ìƒìœ„ 5ê°œ ìƒí’ˆ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” API êµ¬í˜„
- í†µê³„ ì •ë³´ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ê¸°ìˆ ì  ê³ ë¯¼ì„ ì¶©ë¶„ížˆ í•´ë³´ê¸°

5ï¸âƒ£ **`ì‹¬í™”` ìž¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥**
- ì‚¬ìš©ìžëŠ” êµ¬ë§¤ ì´ì „ì— ê´€ì‹¬ ìžˆëŠ” ìƒí’ˆë“¤ì„ ìž¥ë°”êµ¬ë‹ˆì— ì ìž¬
- ì´ ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ìœ„í•´ `ìž¥ë°”êµ¬ë‹ˆì— ìƒí’ˆ ì¶”ê°€/ì‚­ì œ` API ì™€ `ìž¥ë°”êµ¬ë‹ˆ ì¡°íšŒ` API ê°€ í•„ìš”
- ìœ„ ë‘ ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ìœ„í•´ ì–´ë–¤ ìš”êµ¬ì‚¬í•­ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì„¤ê³„í•´ì•¼í•  ì§€?

---

## ðŸ“… 3ì£¼ì°¨ ~ 5ì£¼ì°¨ ë§ˆì¼ìŠ¤í†¤ ê³„íš

| **ì£¼ì°¨** | **ìž‘ì—… ë‚´ìš©**                         | **ì¼ì •**           | **ê¸°ê°„ (Days)** | **ìƒíƒœ** |
|----------|---------------------------------------|------------------|---------------|----------|
| **3ì£¼ì°¨**| **ìš”êµ¬ì‚¬í•­ ë¶„ì„**                     | 10.06 ~ 10.07    | 2             | âœ… ì™„ë£Œ  |
|          | **ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ëž¨ ìž‘ì„±**            | 10.08            | 1             | ðŸ”„ ì§„í–‰ ì¤‘     |
|          | **ERD ë¶„ì„ ë° ìž‘ì„±**                  | 10.09            | 1             | ðŸ”„ ì§„í–‰ ì¤‘     |
|          | **Mock API ê°œë°œ ë° í…ŒìŠ¤íŠ¸**           | 10.10 ~ 10.11 ì˜¤ì „ | 1.5           | ðŸ”„ ì§„í–‰ ì¤‘     |
| **4ì£¼ì°¨**| **ìž”ì•¡ ë„ë©”ì¸ ê°œë°œ**                  |                  |               | â³ ì˜ˆì •     |
|          | - ìž”ì•¡ ì¡°íšŒ API                       | 10.13            | 0.5           | â³ ì˜ˆì •     |
|          | - ìž”ì•¡ ì¡°íšŒ API í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„±      | 10.13            | 0.5           | â³ ì˜ˆì •     |
|          | - ìž”ì•¡ ì¶©ì „ API                       | 10.14            | 0.5           | â³ ì˜ˆì •     |
|          | - ìž”ì•¡ ì¶©ì „ API í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„±      | 10.14            | 0.5           | â³ ì˜ˆì •     |
|          | **ìƒí’ˆ ë„ë©”ì¸ ê°œë°œ**                  | 10.15            | 1             | â³ ì˜ˆì •     |
|          | - ìƒí’ˆ ì¡°íšŒ API                       | 10.15            | 0.5           | â³ ì˜ˆì •     |
|          | - ìƒí’ˆ ì¡°íšŒ API í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„±      | 10.15            | 0.5           | â³ ì˜ˆì •     |
|          | **ì£¼ë¬¸ ë„ë©”ì¸ ê°œë°œ**                  |                  |               | â³ ì˜ˆì •     |
|          | - ì£¼ë¬¸ API                            | 10.16            | 0.5           | â³ ì˜ˆì •     |
|          | - ì£¼ë¬¸ API í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„±           | 10.16            | 0.5           | â³ ì˜ˆì •     |
|          | **ê²°ì œ ë„ë©”ì¸ ê°œë°œ**                  |                  |               | â³ ì˜ˆì •     |
|          | - ê²°ì œ API                            | 10.17            | 0.5           | â³ ì˜ˆì •     |
|          | - ê²°ì œ API í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„±           | 10.17            | 0.5           | â³ ì˜ˆì •     |
| **5ì£¼ì°¨**| **ì‹¬í™” ê¸°ëŠ¥ ê°œë°œ**                    |                  |               | â³ ì˜ˆì •     |
|          | - ìƒìœ„ 5ê°œ ìƒí’ˆ ì •ë³´ ì¡°íšŒ API         | 10.20            | 1             | â³ ì˜ˆì •     |
|          | - ìž¥ë°”êµ¬ë‹ˆ ì¶”ê°€/ì‚­ì œ API              | 10.21 ~ 10.22    | 2             | â³ ì˜ˆì •     |
|          | - ìž¥ë°”êµ¬ë‹ˆ ì¡°íšŒ API                   | 10.23            | 1             | â³ ì˜ˆì •     |
|          | **ì „ë°˜ì ì¸ ë¦¬íŒ©í„°ë§**                 | 10.24            | 1             | â³ ì˜ˆì •     |

## ðŸ“Š Gantt ì°¨íŠ¸ í”„ë¡œì íŠ¸ ì¼ì •

```mermaid
gantt
    title í”„ë¡œì íŠ¸ ì¼ì •
    dateFormat  YYYY-MM-DD
    section 3ì£¼ì°¨
        ìš”êµ¬ì‚¬í•­ ë¶„ì„            :done,    des1, 2024-10-06, 2d
        ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ëž¨ ìž‘ì„±   :active,  des2, 2024-10-08, 1d
        ERD ë¶„ì„ ë° ìž‘ì„±        :active,  des3, 2024-10-09, 1d
        Mock API ê°œë°œ ë° í…ŒìŠ¤íŠ¸  :         des4, 2024-10-10, 1.5d
    section 4ì£¼ì°¨
        ìž”ì•¡ ì¡°íšŒ API           :         des5, 2024-10-13, 0.5d
        ìž”ì•¡ ì¡°íšŒ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„± :       des6, 2024-10-13, 0.5d
        ìž”ì•¡ ì¶©ì „ API           :         des7, 2024-10-14, 0.5d
        ìž”ì•¡ ì¶©ì „ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„± :       des8, 2024-10-14, 0.5d
        ìƒí’ˆ ë„ë©”ì¸ ê°œë°œ        :         des9, 2024-10-15, 1d
        ì£¼ë¬¸ ë„ë©”ì¸ ê°œë°œ        :         des10, 2024-10-16, 1d
        ê²°ì œ ë„ë©”ì¸ ê°œë°œ        :         des11, 2024-10-17, 1d
    section 5ì£¼ì°¨
        ìƒìœ„ 5ê°œ ìƒí’ˆ ì¡°íšŒ API  :         des12, 2024-10-20, 1d
        ìž¥ë°”êµ¬ë‹ˆ ì¶”ê°€/ì‚­ì œ API  :         des13, 2024-10-21, 2d
        ìž¥ë°”êµ¬ë‹ˆ ì¡°íšŒ API       :         des14, 2024-10-23, 1d
        ì „ë°˜ì ì¸ ë¦¬íŒ©í„°ë§       :         des15, 2024-10-24, 1d

```


---

## â³ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ëž¨

- ### ìž”ì•¡ ì¡°íšŒ

```mermaid
sequenceDiagram
    actor User
    participant BalanceController
    participant BalanceFacade
    participant UserService
    participant BalanceService
    participant BalanceRepository

    alt ìž”ì•¡ ì¡°íšŒ ìš”ì²­
        User->>BalanceController: ìž”ì•¡ ì¡°íšŒ ìš”ì²­
    else íŒŒë¼ë¯¸í„° ìœ íš¨ì„±
        BalanceController->>User: ìœ íš¨ì„± Error(400)
    end
    BalanceController->>BalanceFacade: ìœ íš¨í•œ íŒŒë¼ë¯¸í„° ì „ë‹¬
    alt ìœ ì € ì •ë³´ ì¡´ìž¬
        BalanceFacade->>UserService: ìœ ì € ì¡´ìž¬ ì—¬ë¶€ ê²€ì‚¬
    else ìœ ì € ì •ë³´ ë¯¸ì¡´ìž¬
        UserService->>BalanceFacade: ìœ ì € ë¯¸ì¡´ìž¬ Error(500)
    end
    BalanceFacade->>BalanceService: ìž”ì•¡ ì¡°íšŒ
    alt ìž”ì•¡ ì •ë³´ ì¡°íšŒ ì¡´ìž¬
        BalanceService->>BalanceRepository: ìž”ì•¡ ì •ë³´ ì¡°íšŒ
    else ìž”ì•¡ ì •ë³´ ë¯¸ì¡´ìž¬
        BalanceRepository->>BalanceService: ìž”ì•¡ ì •ë³´ ë¯¸ì¡´ìž¬ Error(500)
    end
    BalanceRepository-->>BalanceService: ìž”ì•¡ ì •ë³´ ë°˜í™˜
    BalanceService-->>BalanceFacade: ì¡°íšŒëœ ìž”ì•¡ ì •ë³´ ì „ë‹¬
    BalanceFacade-->>BalanceController: ì¡°íšŒëœ ìž”ì•¡ ì •ë³´ ì „ë‹¬
    BalanceController-->>User: ìž”ì•¡ ì¡°íšŒ ê²°ê³¼ ë°˜í™˜
```

---

- ### ìž”ì•¡ ì¶©ì „
```mermaid
sequenceDiagram
    actor User as ì‚¬ìš©ìž
    participant BalanceController
    participant BalanceFacade
    participant UserService
    participant BalanceService
    participant BalanceRepository

    User->>BalanceController: ìž”ì•¡ ì¶©ì „ ìš”ì²­ (user ID, amount)
    opt ìœ íš¨ì„± ê²€ì‚¬
        User->>BalanceController: 400 Error
    end
    BalanceController->>BalanceFacade: ìœ íš¨í•œ íŒŒë¼ë¯¸í„° ì „ë‹¬
    alt ìœ ì € ì •ë³´ ì¡´ìž¬
        BalanceFacade->>UserService: ìœ ì € ì¡´ìž¬ ì—¬ë¶€ ê²€ì‚¬
    else ìœ ì € ì •ë³´ ë¯¸ì¡´ìž¬
        UserService->>BalanceFacade: ìœ ì € ë¯¸ì¡´ìž¬ 500 Error
    end
    opt ì¶©ì „ ë¡œì§
        BalanceFacade->>BalanceService: ì¶©ì „ ìš”ì²­
        BalanceService->>BalanceService: ì‚¬ìš©ìž ID ê¸°ë°˜ Lock íšë“
        alt ì¶©ì „ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨
            BalanceService-->BalanceFacade: ì¶©ì „ ìœ íš¨ì„± 500 Error
        end
    end
    BalanceService->>BalanceRepository: ì‚¬ìš©ìž ìž”ì•¡ ì •ë³´ ê°±ì‹ 
    BalanceRepository-->>BalanceService: ê°±ì‹  ê²°ê³¼ ë°˜í™˜
    BalanceService-->>BalanceFacade: ì¶©ì „ ì™„ë£Œ ê²°ê³¼ ë°˜í™˜
    BalanceFacade-->>BalanceController: ì¶©ì „ ì™„ë£Œ ê²°ê³¼ ë°˜í™˜
    BalanceController-->>User: ìž”ì•¡ ì¶©ì „ ê²°ê³¼ ë°˜í™˜
```
---

- ### ìƒí’ˆ ì¡°íšŒ

```mermaid
sequenceDiagram
    actor User as ì‚¬ìš©ìž
    participant ProductController
    participant ProductFacade
    participant ProductService
    participant ProductRepository

    User->>ProductController: ìƒí’ˆ ì •ë³´ ì¡°íšŒ ìš”ì²­ (ìƒí’ˆ ID)
    opt ìœ íš¨ì„± ê²€ì‚¬
        ProductController->>User: 400 Error
    end
    ProductController->>ProductFacade: ìœ íš¨í•œ íŒŒë¼ë¯¸í„° ì „ë‹¬
    ProductFacade->>ProductRepository: ìƒí’ˆ ì •ë³´ ì¡°íšŒ
    alt ìƒí’ˆ ì •ë³´ ì¡°íšŒ
        ProductRepository-->>ProductService: ìƒí’ˆ ì¡°íšŒ ì •ë³´ ë°˜í™˜
    else ìƒí’ˆ ì •ë³´ ë¯¸ì¡´ìž¬
        ProductRepository-->>ProductService: ìƒí’ˆ ì •ë³´ ì¡°íšŒ 500 Error
    end
    ProductRepository-->>ProductFacade: ìƒí’ˆ ì •ë³´ ì „ë‹¬
    ProductFacade->>ProductFacade: ìƒí’ˆ ì •ë³´ ê°€ê³µ (í•„ìš” ì‹œ)
    ProductFacade-->>ProductController: ìµœì¢… ìƒí’ˆ ì •ë³´ ë°˜í™˜
    ProductController-->>User: ìƒí’ˆ ì •ë³´ ì¡°íšŒ ê²°ê³¼ ë°˜í™˜

```
---

- ### ì£¼ë¬¸ ë° ê²°ì œ
```mermaid
sequenceDiagram
    actor User as ì‚¬ìš©ìž
    participant OrderController
    participant OrderFacade
    participant UserService
    participant ProductService
    participant ProductRepository
    participant BalanceService
    participant OrderService

    participant OrderRepository
    participant OrderSnapshotRepository
    participant OrderHistoryRepository
    participant PaymentAPI as ì™¸ë¶€ ê²°ì œ API

    User->>OrderController: ì£¼ë¬¸ ê²°ì œ ìš”ì²­ (user ID, product ID)
    opt ìœ íš¨ì„± ê²€ì‚¬
        OrderController->>User: 400 Error
    end
    OrderController->>OrderFacade: ìœ íš¨í•œ íŒŒë¼ë¯¸í„° ì „ë‹¬
    OrderFacade-->UserService: ì‚¬ìš©ìž ì •ë³´ ì¡°íšŒ
    alt ì‚¬ìš©ìž ì •ë³´ ì¡´ìž¬
        UserService->>OrderFacade: ì‚¬ìš©ìž ì •ë³´ ë°˜í™˜
    else ì‚¬ìš©ìž ì •ë³´ ì—†ìŒ
        UserService->>OrderFacade: ì‚¬ìš©ìž ì •ë³´ ì¡°íšŒ 500 Error
    end
    OrderFacade->>ProductService: ìƒí’ˆ ìž¬ê³  ì •ë³´ ì¡°íšŒ
    alt ìƒí’ˆ ìž¬ê³  ì •ë³´ ì¡´ìž¬
        ProductService->>ProductService: ìƒí’ˆ ID ê¸°ë°˜ Lock íšë“
        ProductService->>OrderFacade: ìƒí’ˆ ìž¬ê³  ì •ë³´ ë°˜í™˜
    else ìƒí’ˆ ìž¬ê³  ì •ë³´ ë¯¸ì¡´ìž¬
        ProductService->>OrderFacade: ìƒí’ˆ ìž¬ê³  ì •ë³´ ì¡°íšŒ 500 Error
    end
    alt ìƒí’ˆ ìž¬ê³  ì°¨ê° ê°€ëŠ¥
        ProductService->>ProductRepository: ìž¬ê³  ì°¨ê° ìš”ì²­
    else ìƒí’ˆ ìž¬ê³  ì°¨ê° ë¶ˆê°€
        ProductService --> OrderFacade: ìƒí’ˆ ìž¬ê³  ë¶€ì¡± 500 Error
    end
    OrderFacade->>BalanceService: ìž”ì•¡ ì •ë³´ ì¡°íšŒ
    alt ìž”ì•¡ ì •ë³´ ì¡´ìž¬
        OrderFacade->>OrderFacade: ì‚¬ìš©ìž ID ê¸°ë°˜ì˜ ìž”ì•¡ ì •ë³´ Lock íšë“
        BalanceService->>OrderFacade: ìž”ì•¡ ì •ë³´ ë°˜í™˜
    else ìž”ì•¡ ì •ë³´ ë¯¸ì¡´ìž¬
        BalanceService->>OrderFacade: ìž”ì•¡ ì •ë³´ ì¡°íšŒ 500 Error
    end
    OrderService->>OrderRepository: ì£¼ë¬¸ ì •ë³´ ì €ìž¥
    OrderService->>OrderSnapshotRepository: ì£¼ë¬¸ ìš”ì²­ ìŠ¤ëƒ…ìƒ· ì €ìž¥
    OrderService->>OrderHistoryRepository: ì£¼ë¬¸ ížˆìŠ¤í† ë¦¬ ì €ìž¥

    OrderService->>PaymentAPI: ì™¸ë¶€ ê²°ì œ API ìš”ì²­
    PaymentAPI-->>OrderService: ê²°ì œ ìŠ¹ì¸ or ì‹¤íŒ¨ ì‘ë‹µ
    alt ê²°ì œ ì„±ê³µ
        OrderService->>OrderRepository: ê²°ì œ ì •ë³´ ì €ìž¥ (ìƒíƒœê°’ "ê²°ì œ ì™„ë£Œ")
        OrderService->>OrderRepository: ê²°ì œ ì´ë ¥ ì €ìž¥
    else ê²°ì œ ì‹¤íŒ¨
        OrderService->>OrderRepository: ì£¼ë¬¸ ìƒíƒœë¥¼ "ì£¼ë¬¸ ì™„ë£Œ"
    end
    OrderService-->>User: ìµœì¢… ì£¼ë¬¸ ê²°ì œ ê²°ê³¼ ë°˜í™˜

```